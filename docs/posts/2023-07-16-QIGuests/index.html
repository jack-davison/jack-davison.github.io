<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Jack Davison">
<meta name="dcterms.date" content="2023-07-16">
<meta name="description" content="Scraping the “QI: Quite Interesting” wikipedia page to find out how the guest panellists on QI have changed over time. Alternative title; “What happened to Clive Anderson?”">
<title>Web Scraping QI Guests</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="../../site_libs/core-js-2.5.3/shim.min.js"></script><script src="../../site_libs/react-17.0.0/react.min.js"></script><script src="../../site_libs/react-17.0.0/react-dom.min.js"></script><script src="../../site_libs/reactwidget-1.0.0/react-tools.js"></script><script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="../../site_libs/reactable-0.4.4/reactable.css" rel="stylesheet">
<script src="../../site_libs/reactable-binding-0.4.4/reactable.js"></script><link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Web Scraping QI Guests">
<meta property="og:description" content="Scraping the “QI: Quite Interesting” wikipedia page to find out how the guest panellists on QI have changed over time. Alternative title; “What happened to Clive Anderson?”">
<meta property="og:image" content="https://jack-davison.github.io/posts/2023-07-16-QIGuests/banner.jpg">
<meta name="twitter:title" content="Web Scraping QI Guests">
<meta name="twitter:description" content="Scraping the “QI: Quite Interesting” wikipedia page to find out how the guest panellists on QI have changed over time. Alternative title; “What happened to Clive Anderson?”">
<meta name="twitter:image" content="https://jack-davison.github.io/posts/2023-07-16-QIGuests/banner.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../logo.png" alt="" class="navbar-logo"></a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../experience.html" rel="" target="">
 <span class="menu-text">Experience</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../talks.html" rel="" target="">
 <span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/jdavison_" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jack-davison" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/jack-davison/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Web Scraping QI Guests</h1>
                  <div>
        <div class="description">
          <p>Scraping the “QI: Quite Interesting” wikipedia page to find out how the guest panellists on QI have changed over time. Alternative title; “What happened to Clive Anderson?”</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">rvest</div>
                <div class="quarto-category">webscraping</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jack Davison </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 16, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#scraping" id="toc-scraping" class="nav-link" data-scroll-target="#scraping">Scraping</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a></li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content"><section id="introduction" class="level1"><h1>Introduction</h1>
<p>For those not <em>au fait</em> with the British comedy scene, one of our key comedic exports is the panel show. These typically take the form of four to six comedians sat in a studio, nominally competing in a game which is mainly a vehicle for telling jokes. One of our longest running panel shows is QI, short for “Quite Interesting”, in which Sandi Toksvig (formerly Stephen Fry) quizzes four comedians (one of which is always Alan Davies) on obscure and often impossible trivia, where points are awarded for being interesting and docked for being obvious or predictable.</p>
<p>To me, an interesting thing about long-running panel shows is that they effectively track the popularity of various comedians and guests. As QI has been on since 2003, re-watching the earliest series really gives you that “Oh, them! Whatever happened to them?” reaction. Like the proverbial frog in the incrementally boiling pot of water, celebrities and comedians can lose popularity (or just retire) so gradually that you just don’t notice as its happening.</p>
<p>This blog post scrapes a load of QI data from Wikipedia to see if we can track the popularity of different comedians, at least in reference to their appearances on QI. I’m curious as to whether there is a clearly defined “old guard” (the likes, perhaps, of Clive Anderson and John Sessions) and “new guard” (your Aisling Beas and Josh Widdicombes), or whether things are much more murky.</p>
</section><section id="scraping" class="level1"><h1>Scraping</h1>
<p>We’ll start by loading packages and scraping all the tables from Wikipedia’s <a href="https://en.wikipedia.org/wiki/List_of_QI_episodes">list of QI epsiodes</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># get all tables from wikipedia</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>tbls <span class="ot">&lt;-</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>(<span class="st">"https://en.wikipedia.org/wiki/List_of_QI_episodes"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>()</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first table is a sort of “meta-table” of all of the different series. Those unfamiliar with QI will note that the series are labelled with letters rather than numbers, as the trivia topics are themed around each letter. There are some specials related to annual televised charity events in the UK (Sports Relief, Comic Relief, etc.).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>tbls[[<span class="dv">1</span>]]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 25 × 5
   Series Episodes Episodes `Originally aired`             `Originally aired`   
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;                          &lt;chr&gt;                
 1 Series Episodes Episodes First aired                    Last aired           
 2 Pilot  Pilot    Pilot    Unaired                        Unaired              
 3 A      12       12       11&nbsp;September&nbsp;2003&nbsp;(2003-09-11) 23&nbsp;December&nbsp;2003&nbsp;(20…
 4 B      12       12       8&nbsp;October&nbsp;2004&nbsp;(2004-10-08)    17&nbsp;December&nbsp;2004&nbsp;(20…
 5 C      12       12       30&nbsp;September&nbsp;2005&nbsp;(2005-09-30) 9&nbsp;December&nbsp;2005&nbsp;(200…
 6 D      13       13       29&nbsp;September&nbsp;2006&nbsp;(2006-09-29) 15&nbsp;December&nbsp;2006&nbsp;(20…
 7 E      13       13       21&nbsp;September&nbsp;2007&nbsp;(2007-09-21) 14&nbsp;December&nbsp;2007&nbsp;(20…
 8 F      12       12       14&nbsp;November&nbsp;2008&nbsp;(2008-11-14)  21&nbsp;March&nbsp;2009&nbsp;(2009-…
 9 G      18       18       26&nbsp;November&nbsp;2009&nbsp;(2009-11-26)  16&nbsp;April&nbsp;2010&nbsp;(2010-…
10 H      18       18       17&nbsp;September&nbsp;2010&nbsp;(2010-09-17) 2&nbsp;May&nbsp;2011&nbsp;(2011-05-…
# ℹ 15 more rows</code></pre>
</div>
</div>
<p>We’ll need to tidy this up a bit - there’s a repeat column, the column names are annoying, and the air dates aren’t formatted as dates. We can use <code><a href="https://stringr.tidyverse.org/reference/str_extract.html">stringr::str_extract()</a></code>, a bit of REGEX, and <a href="https://lubridate.tidyverse.org">lubridate</a> to sort out this latter issue.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># meta info about series</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>meta <span class="ot">&lt;-</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop duplicated column</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  tbls[[<span class="dv">1</span>]][<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove repeat row</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">row_to_names</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># nicer names</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add episode number to specials</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">episodes =</span> <span class="fu">if_else</span>(<span class="sc">!</span>series <span class="sc">%in%</span> LETTERS, 1L, <span class="fu">as.integer</span>(episodes)),</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># format dates properly</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ends_with</span>(<span class="st">"aired"</span>),</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>      \(x) <span class="fu">str_extract</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">d{4}-</span><span class="sc">\\</span><span class="st">d{2}-</span><span class="sc">\\</span><span class="st">d{2}"</span>) <span class="sc">%&gt;%</span> <span class="fu">ymd</span>()</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># series to factor</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">series =</span> <span class="fu">fct_inorder</span>(series)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(meta)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 24
Columns: 4
$ series      &lt;fct&gt; Pilot, A, B, C, D, E, F, G, H, Comic Relief, I, Sport Reli…
$ episodes    &lt;int&gt; 1, 12, 12, 12, 13, 13, 12, 18, 18, 1, 18, 1, 18, 18, 18, 1…
$ first_aired &lt;date&gt; NA, 2003-09-11, 2004-10-08, 2005-09-30, 2006-09-29, 2007-…
$ last_aired  &lt;date&gt; NA, 2003-12-23, 2004-12-17, 2005-12-09, 2006-12-15, 2007-…</code></pre>
</div>
</div>
<p>If we’d like to, we can now visualise the series as in <a href="#fig-qiseries">Figure&nbsp;1</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-qiseries</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "The original duration of all non-special series of QI"</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>meta <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(series <span class="sc">%in%</span> LETTERS) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">series =</span> <span class="fu">fct_rev</span>(series)) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> series, <span class="at">yend =</span> series, <span class="at">x =</span> first_aired, <span class="at">xend =</span> last_aired)) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>() <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> last_aired)) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-qiseries" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="index_files/figure-html/fig-qiseries-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1: The original duration of all non-special series of QI</figcaption></figure>
</div>
</div>
</div>
<p>Now the real interesting parts are in tables 2 through 25. These contain a load of information relating to the individual episodes; the title, the guests, who won, and so on. We’ll <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map()</a></code> over these tables to make them easy to bind together and then combine them into a single tibble.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># bind data together</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>raw <span class="ot">&lt;-</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  tbls[<span class="dv">2</span><span class="sc">:</span><span class="dv">25</span>] <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make everything a character column for binding, rename "viewers" consistently</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">mutate</span>(.x, <span class="fu">across</span>(<span class="fu">everything</span>(), as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rename_with</span>(<span class="at">.fn =</span> \(x) <span class="fu">if_else</span>(<span class="fu">str_detect</span>(x, <span class="st">"Viewers"</span>), <span class="st">"Viewers"</span>, x))) <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add series name</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map2</span>(meta<span class="sc">$</span>series, <span class="sc">~</span> <span class="fu">mutate</span>(.x, <span class="at">series =</span> .y, <span class="at">.before =</span> <span class="fu">everything</span>())) <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># bind</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># format NA properly</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(.x, <span class="st">"N/A"</span>), <span class="cn">NA</span>, .x))) <span class="sc">%&gt;%</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># nicer names</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(raw[<span class="sc">-</span><span class="dv">1</span>,])</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 325
Columns: 8
$ series            &lt;fct&gt; A, A, A, A, A, A, A, A, A, A, A, A, B, B, B, B, B, B…
$ no_overall        &lt;chr&gt; "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "…
$ no_in_series      &lt;chr&gt; "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "…
$ title             &lt;chr&gt; "\"Adam\"", "\"Astronomy\"", "\"Aquatic Animals\"", …
$ guests            &lt;chr&gt; "Danny Baker\nHugh Laurie\nJohn Sessions", "Bill Bai…
$ winner_s          &lt;chr&gt; "Danny Baker", "Rich Hall and Jeremy Hardy", "Clive …
$ original_air_date &lt;chr&gt; "11&nbsp;September&nbsp;2003&nbsp;(2003-09-11)", "18&nbsp;September&nbsp;2003…
$ viewers           &lt;chr&gt; "3.20", "2.16 (BBC2)+ 0.20 (BBC4)", "2.46 (BBC2)+ 0.…</code></pre>
</div>
</div>
<p>There’s a few things to sort out here:</p>
<ul>
<li><p>Some of the names look rubbish (e.g., <code>winner_s</code>)</p></li>
<li><p>Some of the Wikipedia cross-references (e.g., <code>"[fn 2]"</code>) are polluting the character columns.</p></li>
<li><p>The guests and winners are provided as single strings (e.g., <code>"Danny Baker\nHugh Laurie\nJohn Sessions"</code>) which will make them harder to work with.</p></li>
<li><p>Something really dodgy is going on with the Pilot, which we’ll deal with manually.</p></li>
<li><p>The viewers column is in a bit of a state too, combining different versions of the same episode on different channels in inconsistent ways. We’ll just drop it as we don’t need it today.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>clean <span class="ot">&lt;-</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># rename winners</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(raw, <span class="at">winners =</span> winner_s),</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set episode #s as integers</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(no_overall<span class="sc">:</span>no_in_series, as.integer),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># get rid of dodgy chars in titles</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">str_remove_all</span>(title, <span class="st">'</span><span class="sc">\\</span><span class="st">"'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_remove_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[fn </span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">]"</span>),</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">winners =</span> <span class="fu">str_remove_all</span>(winners, <span class="st">'</span><span class="sc">\\</span><span class="st">"'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_remove_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[fn </span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">]"</span>),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># split guests/winners into list cols</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">guests =</span> <span class="fu">str_split</span>(guests, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">winners =</span> <span class="fu">str_split</span>(winners, <span class="at">pattern =</span> <span class="st">" and "</span>),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># format date</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">original_air_date =</span> <span class="fu">str_extract</span>(original_air_date, <span class="st">"</span><span class="sc">\\</span><span class="st">d{4}-</span><span class="sc">\\</span><span class="st">d{2}-</span><span class="sc">\\</span><span class="st">d{2}"</span>) <span class="sc">%&gt;%</span> <span class="fu">ymd</span>()</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># drop viewers col</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>viewers)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>clean<span class="sc">$</span>guests[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> clean<span class="sc">$</span>guests[[<span class="dv">1</span>]][<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our clean data can be viewed in <a href="#fig-react">Figure&nbsp;2</a>, where each series can be expanded and collapsed to read more.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-react</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "The clean QI guests dataset"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>clean <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">"Series"</span>, <span class="st">"# Overall"</span>, <span class="st">"# in Series"</span>, <span class="st">"Title"</span>, <span class="st">"Guests"</span>, <span class="st">"Winner(s)"</span>, <span class="st">"Air Date"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  reactable<span class="sc">::</span><span class="fu">reactable</span>(<span class="at">groupBy =</span> <span class="fu">c</span>(<span class="st">"Series"</span>), <span class="at">pagination =</span> F)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-react" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-041f30b02aec34e78f3a" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-041f30b02aec34e78f3a">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Series":["Pilot","A","A","A","A","A","A","A","A","A","A","A","A","B","B","B","B","B","B","B","B","B","B","B","B","C","C","C","C","C","C","C","C","C","C","C","C","D","D","D","D","D","D","D","D","D","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","E","F","F","F","F","F","F","F","F","F","F","F","F","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","H","H","H","H","H","H","H","H","H","H","H","H","H","H","H","H","H","H","Comic Relief","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","Sport Relief","J","J","J","J","J","J","J","J","J","J","J","J","J","J","J","J","J","J","K","K","K","K","K","K","K","K","K","K","K","K","K","K","K","K","K","K","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","O","O","O","O","O","O","O","O","O","O","O","O","O","O","O","O","O","O","P","P","P","P","P","P","P","P","P","P","P","P","P","P","P","P","P","P","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","Q","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","S","S","S","S","S","S","S","S","S","S","S","S","S","S","S","S","Comic Relief","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],"# Overall":["NA",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,"NA",62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,"NA","NA",90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,"NA","NA","NA",106,107,108,109,110,111,112,113,114,115,116,117,118,"NA","NA",119,120,121,"NA",122,123,124,125,126,127,128,129,130,131,132,133,134,135,"NA","NA",136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,"NA","NA",154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,"NA","NA",170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,"NA","NA",186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,"NA","NA",202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,"NA","NA",218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,"NA","NA",234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,"NA","NA",250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,"NA","NA",266,267,268,269,270,271,272,273,274,275,276,277,278,279,"NA","NA","NA",280,281,282,283,284,285,286,287,288,289,290,291,292,293,"NA","NA"],"# in Series":["NA",1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,"NA",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,"NA",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,"NA",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],"Title":["Pilot","Adam","Astronomy","Aquatic Animals","Atoms","Advertising","Antidotes","Arthropods","Albania","Antelopes","Aviation","Arts","Advent","Blue","Birds","Bombs","Bible","Bears","Beavers","Biscuits","Bees","Bats","Bills","Beats","Birth","Campanology","Cummingtonite","Common Knowledge","Cheating","Cat's Eyes","Cockneys","Constellations","Corby","Creatures","Cleve Crudgington","Carnival","Combustion","Danger","Discoveries","Dogs","Dictionaries","Death","Drinks","Differences","Descendants","Doves","Divination","Deprivation","Domesticity","December","Engineering","Electricity","Eating","Exploration","Europe",".mw-parser-output .vanchor>:target~.vanchor-text{background-color:#b1d2ff}Everything, Etc.","Espionage","Eyes and Ears","Entertainment","England","Endings","Empire","Elephants","Families","Fire and Freezing","Flotsam and Jetsam","Fight or Flight","France","Fakes and Frauds","Fingers and Fumbs","Fashion","The Future","Flora and Fauna","Film","Food","Gardens","G-Animals","Games","Geography","Groovy","Genius","Girls and Boys","Germany","Gallimaufrey","Greats","Gifts","Gravity","Gothic","Greeks","Green","Geometry","QI VG: Series G Compilation Show 1","QI VG: Series G Compilation Show 2","Hodge Podge","H Anatomy","Hoaxes","Humans","H Animals","Happiness","Horrible","Hypothetical","House and Home","Health and Safety","Highs and Lows","Horses & Hunting","Holidays","Hocus Pocus","Hypnosis, Hallucinations & Hysteria","History","QI VG: Series H Compilation Show 1","QI VG: Series H Compilation Show 2","Comic Relief special","I-Spy","International","Imbroglio","Indecision","Invertebrates","Inventive","Incomprehensible","Inequality","Illness","Inland Revenue","Infantile","Illumination","Intelligence","QI VG: Series I Compilation Show 1","QI VG: Series I Compilation Show 2","Ice","The Immortal Bard","Idleness","Sport Relief special","Jargon","Jam, Jelly and Juice","Journeys","Jack and Jill","J-Places","Joints","Journalism","Jumble","Jeopardy","Jungles","Jumpers","Justice","Jobs","Jingle Bells","QI VG: Series J Compilation Show 1","QI VG: Series J Compilation Show 2","Jolly","Just the Job","Knees and Knockers","Kit and Kaboodle","K-Folk","Knits & Knots","Kings","Killers","Knowledge","Keys","Kinetic","Keeps","Kinky","Knights and Knaves","Kitchen Sink","Kris Kringle","Kitsch","Kaleidoscope","QI VG: Series K Compilation Show 1","QI VG: Series K Compilation Show 2","L-Animals","Location, Location, Location","Literature","Levity","Lenses","Liblabble","Lethal","Lovely","Ladies and Gents","Lying","Lumped Together","No-L","Lucky Losers","Little and Large","Long Lost","Landmarks","QI VG: Series L Compilation Show 1","QI VG: Series L Compilation Show 2","A Medley of Maladies","Military Matters","M-Places","Miscellany","Maths","Marriage and Mating","Middle Muddle","Merriment","Messing with Your Mind","Making a Meal of It","Menagerie","Medieval Macabre","Monster Mash","Messy","Mix and Match","Misconceptions","QI VG: Series M Compilation Show 1","QI VG: Series M Compilation Show 2","Naming Names","North Norse","Nosey Noisy","Noble Rot","Not Nearly","Night","Naked Truth","Non Sequiturs","Noel","Nature/Nurture","Nonsense","Noodles","Naval Navigation","Numbers","Next","New","QI VG: Series N Compilation Show 1","QI VG: Series N Compilation Show 2","Ologies","Organisms","Oceans","Over and Ova","Odorous and Odious","Odds and Ends","Opposites","Operations","O Christmas","Origins and Openings","Objects and Ornaments","The Occult","Omnishambles","Oddballs","Occupations and Offices","Overseas","QI VG: Series O Compilation Show 1","QI VG: Series O Compilation Show 2","Panimals","Peril","Piecemeal","Parts","Public and Private","Pictures","Picnics","Plants","Pubs","Pain & Punishment","Potpourri","Procrastination","Phenomena","Pathological","Past Times","Post","QI VG: Series P Compilation Show 1","QI VG: Series P Compilation Show 2","Quirky","Quintessential","Quarrels","Queasy Quacks","Questions and Qualifications","Quests: Part I","Quests: Part II","Qanimals","Quizmas","Quiet","Quaffing","Quagmire","Quills","Queens","Quantity and Quality","Quads & Quins","QI VG: Series Q Compilation Show 1","QI VG: Series Q Compilation Show 2","Rude","Ruff & Reddy","Road & Rail","Restaurants","Rubbish","Ridiculous","Revolutions","Reflections","Radioactive","Rest & Recreation","Roaming","Rejoice! A Christmas Special","R Animals","Rogue","Random","Rock 'n' Roll","QI VG: Series R Compilation Show 1","QI VG: Series R Compilation Show 2","Sick","Secrets, Spies & Sleuths","Shady & Shaky","Sideshows, Stunts and Scavenger Hunts","Sugar & Spice","Sensational","Spooky","Season's Greetings","S Animals","Smörgåsbord","Saints & Sinners","Silly Season","Sun, Sea & Sandi","Sexed-Up","QI VG: Series S Compilation Show 1","QI VG: Series S Compilation Show 2","Comic Relief special","Tips and Tools","'T' Animals","Television","Thrills & Spills","Testing","Tricks & Treats","Toys, Tinsel, and Turkeys","Ticks Tax Toes","Theatrical!","Telling Tails","Trundling","This, That and the Other","Tubular","Tea Time","QI VG: Series T Compilation Show 1","QI VG: Series T Compilation Show 2"],"Guests":[["Bill Bailey","Kit Hesketh-Harvey","Eddie Izzard"],["Danny Baker","Hugh Laurie","John Sessions"],["Bill Bailey","Rich Hall","Jeremy Hardy"],["Clive Anderson","Bill Bailey","Meera Syal"],["Jo Brand","Howard Goodall","Jeremy Hardy"],["Gyles Brandreth","Rob Brydon","Rich Hall"],["Danny Baker","Jo Brand","Howard Goodall"],["Jo Brand","Jimmy Carr","Jackie Clune"],["Clive Anderson","Sean Lock","Linda Smith"],["Jo Brand","Dave Gorman","Jeremy Hardy"],["Rich Hall","Julia Morris","Peter Serafinowicz"],["Bill Bailey","Richard E. Grant","Linda Smith"],["Phill Jupitus","Sean Lock","John Sessions"],["Bill Bailey","Jo Brand","Sean Lock"],["Jo Brand","Rich Hall","Phil Kay"],["Clive Anderson","Rich Hall","Phill Jupitus"],["Jeremy Clarkson","Barry Cryer","Jeremy Hardy"],["Bill Bailey","Jo Brand","Jimmy Carr"],["Bill Bailey","Sean Lock","Anneka Rice"],["Rich Hall","Dara Ó Briain","Arthur Smith"],["Jo Brand","Rich Hall","Fred MacAulay"],["Rich Hall","Josie Lawrence","John Sessions"],["Clive Anderson","Phil Kay","John Sessions"],["Mark Gatiss","Sean Lock","Linda Smith"],["Rich Hall","Phill Jupitus","Mark Steel"],["Bill Bailey","Rob Brydon","Rich Hall"],["Andy Hamilton","Doon Mackichan","Arthur Smith"],["Jimmy Carr","Sean Lock","Rory McGrath"],["Alexander Armstrong","Jeremy Clarkson","John Sessions"],["Jo Brand","Rich Hall","Sean Lock"],["Bill Bailey","Phill Jupitus","Rory McGrath"],["Jeremy Clarkson","Rich Hall","Sean Lock"],["Bill Bailey","Phill Jupitus","David Mitchell"],["Helen Atkinson-Wood","Bill Bailey","Andy Hamilton"],["Clive Anderson","John Sessions","Mark Steel"],["Clive Anderson","Jo Brand","Phill Jupitus"],["Bill Bailey","Phill Jupitus","Dara Ó Briain"],["Jo Brand","Jimmy Carr","Sean Lock"],["Clive Anderson","Vic Reeves","Arthur Smith"],["Jeremy Clarkson","Neil Mullarkey","Liza Tarbuck"],["Ronni Ancona","Rory Bremner","Phill Jupitus"],["Clive Anderson","Sean Lock","Andy Parsons"],["Jimmy Carr","Phill Jupitus","John Sessions"],["Jo Brand","Julian Clary","Dara Ó Briain"],["Rich Hall","Phill Jupitus","Jonathan Ross"],["Andy Hamilton","David Mitchell","John Sessions"],["Graeme Garden","Phill Jupitus","Johnny Vaughan"],["Roger McGough","Vic Reeves","Mark Steel"],["Jo Brand","Phill Jupitus","Jessica Stevenson"],["Jo Brand","Rich Hall","Dara Ó Briain"],["Bill Bailey","Rob Brydon","Jimmy Carr"],["Jo Brand","Rich Hall","Sean Lock"],["Jimmy Carr","Phill Jupitus","Johnny Vegas"],["Bill Bailey","Rich Hall","Sean Lock"],["Phill Jupitus","David Mitchell","Dara Ó Briain"],["Clive Anderson","Jeremy Clarkson","Vic Reeves"],["Clive Anderson","Jo Brand","Vic Reeves"],["Jimmy Carr","Phill Jupitus","David Mitchell"],["Bill Bailey","Jo Brand","Jeremy Clarkson"],["Charlie Higson","Phill Jupitus","Sean Lock"],["Jimmy Carr","Doon Mackichan","Dara Ó Briain"],["Bill Bailey","Jo Brand","Sean Lock"],null,["Ronni Ancona","David Mitchell","Sir Terry Wogan"],["Clive Anderson","Rob Brydon","Dom Joly"],["Rob Brydon","Andy Hamilton","Charlie Higson"],["Pam Ayres","Sean Lock","Johnny Vegas"],["Jo Brand","Hugh Dennis","Phill Jupitus"],["Marcus Brigstocke","Jimmy Carr","Sean Lock"],["Jo Brand","Phill Jupitus","Dara Ó Briain"],["Clive Anderson","Rich Hall","Reginald D. Hunter"],["Rob Brydon","Sean Lock","Ben Miller"],["Jo Brand","Jimmy Carr","John Sergeant"],["David Mitchell","John Sessions","Emma Thompson"],["Jimmy Carr","Rich Hall","David Mitchell"],["Rob Brydon","David Mitchell","Dara Ó Briain"],["Bill Bailey","John Hodgman[fn 12]","Sean Lock","Sandi Toksvig"],["Phill Jupitus","Sean Lock","Liza Tarbuck"],["Jo Brand","Rob Brydon","Jimmy Carr"],["Bill Bailey","Lee Mack","David Tennant"],["David Mitchell","Graham Norton","Dara Ó Briain"],["Ronni Ancona","Jack Dee","Sandi Toksvig"],["Jo Brand","Rob Brydon","Sean Lock"],["Hugh Dennis","Andy Hamilton","Phill Jupitus"],["Jo Brand","Sean Lock","David Mitchell"],["Clive Anderson","Jimmy Carr","Jan Ravens"],["Bill Bailey","Rich Hall","Barry Humphries"],["Jimmy Carr","Jack Dee","Sue Perkins"],["Clive Anderson","Rich Hall","Phill Jupitus"],["Bill Bailey","Danny Baker","Jeremy Clarkson"],["Rob Brydon","David Mitchell","Johnny Vegas"],null,null,["Jack Dee","Phill Jupitus","Ross Noble"],["Bill Bailey","Gyles Brandreth","Sue Perkins"],["Danny Baker","Sean Lock","David Mitchell"],["Jo Brand","Jimmy Carr","Jack Dee"],["Sean Lock","Ross Noble","Ruby Wax"],["Rich Hall","Andy Hamilton","Phill Jupitus"],["Chris Addison","Sean Lock","Dara Ó Briain"],["John Lloyd","Sandi Toksvig","Johnny Vegas"],["Bill Bailey","Danny Baker","Eddie Izzard"],["Jeremy Clarkson","David Mitchell","Ross Noble"],["Rob Brydon","Fred MacAulay","Sandi Toksvig"],["Clare Balding","Jimmy Carr","Dara Ó Briain"],["Bill Bailey","Rob Brydon","Rich Hall"],["Lee Mack","Graham Norton","Daniel Radcliffe"],["Ronni Ancona","Phill Jupitus","Robert Webb"],["Rob Brydon","David Mitchell","Sandi Toksvig"],null,null,["Jo Brand","Sue Perkins","Russell Tovey","David Walliams"],["Jimmy Carr","Lee Mack","Sandi Toksvig"],["Bill Bailey","Jack Dee","David Mitchell"],["John Bishop","Sean Lock","Frank Skinner"],["Jimmy Carr","Rich Hall","Phill Jupitus"],["Jimmy Carr","Sarah Millican","Johnny Vegas"],["Bill Bailey","Nina Conti[fn 18]","Sean Lock"],["Prof. Brian Cox","Ross Noble","Sue Perkins"],["Clive Anderson","Sandi Toksvig","Henning Wehn"],["Jo Brand","Ben Goldacre","Andy Hamilton"],["Al Murray","Dara Ó Briain","Sandi Toksvig"],["Ronni Ancona","Dave Gorman","Lee Mack"],["Chris Addison","Jack Dee","Rich Hall"],["Jo Brand","Phill Jupitus","David Mitchell"],null,null,["Brian Blessed","Sean Lock","Ross Noble"],["Bill Bailey","David Mitchell","Sue Perkins"],["Jeremy Clarkson","Ross Noble","Dara Ó Briain"],["Jimmy Carr","Lee Mack","Sandi Toksvig"],["Bill Bailey","Jimmy Carr","Victoria Coren"],["Jo Brand","Sue Perkins","Liza Tarbuck"],["Rob Brydon","Phill Jupitus","Cal Wilson"],["Katy Brand","David Mitchell","Sue Perkins"],["Bill Bailey","Susan Calman","Sandi Toksvig"],["Jimmy Carr","Jack Whitehall","Cal Wilson"],["Shappi Khorsandi","Ross Noble","Johnny Vegas"],["Jo Brand","Dara Ó Briain","John Sessions"],["Ross Noble","Sue Perkins","Julia Zemiro"],["Reginald D. Hunter","David O'Doherty","Greg Proops"],["Bill Bailey","Julian Clary","Ross Noble"],["Prof. Brian Cox","Rhys Darby","Jason Manford"],["The Rev. Richard Coles","Sarah Millican","David Mitchell"],["Danny Baker","Phill Jupitus","Sarah Millican"],null,null,["Rob Brydon","Tim Vine","Julia Zemiro"],["Jeremy Clarkson","Jason Manford","Sandi Toksvig"],["David Mitchell","Sara Pascoe","Jack Whitehall"],["Noel Fielding","Colin Lane","Ross Noble"],["Phill Jupitus","Katherine Ryan","Josh Widdicombe"],["David Mitchell","Ross Noble","Sue Perkins"],["Bill Bailey","Jimmy Carr","Jeremy Clarkson"],["Jason Manford","Trevor Noah","Sandi Toksvig"],["Jo Brand","Jimmy Carr","Graham Linehan"],["Bill Bailey","Tim Minchin","Isy Suttie"],["Danny Baker","Jo Brand","Marcus Brigstocke"],["Bill Bailey","Jason Manford","Sarah Millican"],["Janet Street-Porter","Sandi Toksvig","Johnny Vegas"],["The Rev. Richard Coles","Victoria Coren Mitchell","Sue Perkins"],["Jason Manford","Richard Osman","Victoria Wood"],["Jo Brand","Phill Jupitus","Brendan O'Carroll"],["Jimmy Carr","Reginald D. Hunter","Sue Perkins"],["Susan Calman","Liza Tarbuck","Sandi Toksvig"],null,null,["Colin Lane","Sarah Millican","Ross Noble"],["Aisling Bea","Jason Manford","Johnny Vegas"],["Victoria Coren Mitchell","Lloyd Langford","Jack Whitehall"],["Sue Perkins","Frank Skinner","Josh Widdicombe"],["Jo Brand","Phill Jupitus","Josh Widdicombe"],["Bill Bailey","The Rev. Richard Coles","Sara Pascoe"],["Bill Bailey","Jason Manford","Sandi Toksvig"],["Aisling Bea","Tony Hawks","Josh Widdicombe"],["Kathy Lette","Ross Noble","Sue Perkins"],["Adam Hills","Sara Pascoe","Jack Whitehall"],["Ronni Ancona","Jimmy Carr","David Mitchell"],["Bill Bailey","Jimmy Carr","Carrie Fisher"],["Danny Baker","Jeremy Clarkson","Sandi Toksvig"],["Phill Jupitus","Richard Osman","Lucy Porter"],["Jimmy Carr","Claudia O'Doherty","Suggs"],["Jo Brand","Colin Lane","David Mitchell"],null,null,["Matt Lucas","Ross Noble","Lucy Porter"],["Jimmy Carr","Jeremy Clarkson","Sheila Hancock"],["David Mitchell","Sue Perkins","Sami Shah"],["Noel Fielding","Rhod Gilbert","Cariad Lloyd"],["Aisling Bea","Susan Calman","Sandi Toksvig"],["Bill Bailey","Jo Brand","Greg Davies"],["Aisling Bea","Danny Bhoy","Jimmy Carr"],["Bill Bailey","Jenny Eclair","Johnny Vegas"],["Sarah Millican","Tommy Tiernan","Josh Widdicombe"],["Phill Jupitus","Cariad Lloyd","Dermot O'Leary"],["Bill Bailey","Sue Perkins","Romesh Ranganathan"],["Matt Lucas","David Mitchell","Julia Zemiro"],["Phill Jupitus","Sara Pascoe","Josh Widdicombe"],["Noel Fielding","Eddie Kadi","Sarah Millican"],["James Acaster","Bill Bailey","Jo Brand"],["Chris Addison","Sara Cox","Sue Perkins"],null,null,["Phill Jupitus","Cariad Lloyd","Romesh Ranganathan"],["Lucy Beaumont","Rhod Gilbert","Jason Manford"],["Aisling Bea","Ross Noble","Corey Taylor"],["Jeremy Clarkson","Jason Manford","Sara Pascoe"],["Gyles Brandreth","Jimmy Carr","Victoria Coren Mitchell"],["Noel Fielding","David Mitchell","Holly Walsh"],["Lolly Adefope","Lee Mack","Richard Osman"],["Phill Jupitus","Miles Jupp","Deirdre O'Kane"],["Susan Calman","Matt Lucas","Josh Widdicombe"],["David Baddiel","Cariad Lloyd","Ross Noble"],["Phill Jupitus","Nish Kumar","Holly Walsh"],["Cariad Lloyd","Matt Lucas","Jerry Springer"],["Ronni Ancona","Jimmy Carr","Johnny Vegas"],["Noel Fielding","Colin Lane","Sarah Millican"],["Frankie Boyle","Ross Noble","Lucy Porter"],["Clive Anderson","Jo Brand","Jimmy Carr"],null,null,["Bill Bailey","Phill Jupitus","Claudia Winkleman"],["Nish Kumar","Cariad Lloyd","Holly Walsh"],["Aisling Bea","Joe Lycett","David Mitchell"],["Bill Bailey","Grayson Perry","Jan Ravens"],["Nish Kumar","Ross Noble","Sally Phillips"],["Matt Lucas","Romesh Ranganathan","Liza Tarbuck"],["Jimmy Carr","Colin Lane","Sara Pascoe"],["Bill Bailey","Rhod Gilbert","Katherine Ryan"],["Jason Manford","Romesh Ranganathan","Holly Walsh"],["Susan Calman","Rich Hall","Josh Widdicombe"],["Alice Levine","Cariad Lloyd","Sarah Millican"],["Aisling Bea","Russell Brand","Noel Fielding"],["Stephen K. Amos","Cally Beaton","Josh Widdicombe"],["Jimmy Carr","Victoria Coren Mitchell","Jason Manford"],["David Mitchell","Deirdre O'Kane","Richard Osman"],["Bill Bailey","Desiree Burch","Colin Lane"],null,null,["Danny Baker","Teri Hatcher","Phill Jupitus"],["Aisling Bea","Lee Mack","Jason Manford"],["Gyles Brandreth","Jimmy Carr","Sally Phillips"],["Ed Balls","Sara Pascoe","Johnny Vegas"],["Bridget Christie","Victoria Coren Mitchell","Phill Jupitus"],["Noel Fielding","Hannah Gadsby","Joe Lycett"],["Richard Osman","Rachel Parris","Romesh Ranganathan"],["Stephen K. Amos","Jason Manford","Sara Pascoe"],["Noel Fielding","Cariad Lloyd","Josh Widdicombe"],["Jimmy Carr","Alice Levine","Lee Mack"],["Cally Beaton","Rhod Gilbert","Phill Jupitus"],["Aisling Bea","Nikki Bedi","Holly Walsh"],["Cariad Lloyd","Paul Sinha","Josh Widdicombe"],["Ed Byrne","Rhod Gilbert","Sindhu Vee"],["Joe Lycett","Ellie Taylor","Phil Wang"],["Susan Calman","Matt Lucas","Holly Walsh"],null,null,["Loyiso Gola","Jason Manford","Sarah Millican"],["Cariad Lloyd","Holly Walsh","Josh Widdicombe"],["Aisling Bea","Jason Manford","Anuvab Pal"],["Stephen K. Amos","Victoria Coren Mitchell","Claudia Winkleman"],["Ade Adepitan","Nish Kumar","Holly Walsh"],["Alan Carr","Phill Jupitus","Alice Levine"],["Susan Calman","Joe Lycett","Holly Walsh"],["Daliso Chaponda","Phill Jupitus","Cariad Lloyd"],["Sara Pascoe","Johnny Vegas","Josh Widdicombe"],["Jimmy Carr","Andrew Maxwell","Sara Pascoe"],["Jo Brand","Phill Jupitus","Prue Leith"],["Aisling Bea","Sally Phillips","Sindhu Vee"],["Tom Allen","Jimmy Carr","Lou Sanders"],["Colin Lane","Sarah Millican","David Mitchell"],["James Acaster","Bridget Christie","Joe Lycett"],["Aisling Bea","Nish Kumar","David Mitchell"],null,null,["John Barrowman","Aisling Bea","Phill Jupitus"],["Tom Allen","Susan Calman","Zoe Lyons"],["Aisling Bea","Cally Beaton","Holly Walsh"],["Phill Jupitus","Sara Pascoe","Mark Watson"],["Bridget Christie","Johnny Vegas","Holly Walsh"],["Maisie Adam","David Mitchell","Holly Walsh"],["Gyles Brandreth","Susan Calman","Jessica Fostekew"],["Joe Lycett","Zoe Lyons","Liza Tarbuck"],["Joe Lycett","Shazia Mirza","Josh Widdicombe"],["Stephen K. Amos","Susan Calman","Lou Sanders"],["Sara Pascoe","Josh Widdicombe","Benjamin Zephaniah"],["Chris McCausland","Justin Moorhouse","Holly Walsh"],["Dr. Maggie Aderin-Pocock","Tom Allen","Ed Gamble"],["Bill Bailey","Jack Carroll","Olga Koch"],["Bill Bailey","Daliso Chaponda","Sally Phillips"],["Eshaan Akbar","Bill Bailey","Katy Brand"],null,null,["Maisie Adam","Jo Brand","Lee Mack"],["James Acaster","Daliso Chaponda","Cariad Lloyd"],["Eshaan Akbar","John Barrowman","Victoria Coren Mitchell"],["Gyles Brandreth","Rosie Jones","Nish Kumar"],["Alice Levine","Jason Manford","Rose Matafeo"],["Aisling Bea","Roisin Conaty","Jessica Fostekew"],["Zoe Lyons","David Mitchell","Richard Osman"],["Bonnie Langford","Joe Lycett","Sally Phillips"],["Cally Beaton","Jamali Maddix","Josh Widdicombe"],["Jen Brister","Jimmy Carr","Chris McCausland"],["Bridget Christie","Johnny Vegas","Mark Watson"],["Stephen K. Amos","Ivo Graham","Holly Walsh"],["Ed Gamble","Lou Sanders","Sindhu Vee"],["Sara Pascoe","Suzi Ruffell","Ahir Shah"],null,null,["Jo Brand","Guz Khan","Sally Phillips"],["Bill Bailey","Joe Lycett","Holly Walsh"],["Desiree Burch","Jason Manford","Hannah Waddingham"],["Greg James","Zoe Lyons","Richard Osman"],["Nish Kumar","Suzi Ruffell","Mark Steel"],["Maisie Adam","Susan Calman","Josh Widdicombe"],["Eshaan Akbar","Jimmy Carr","Ria Lina"],["Aisling Bea","Gyles Brandreth","Chris McCausland"],["Rose Matafeo","Ross Noble","Lou Sanders"],["Cally Beaton","Ed Byrne","Jack Dee"],["Rob Beckett","Daliso Chaponda","Sarah Millican"],["Tom Allen","Cariad Lloyd","Jamie MacDonald"],["Jo Brand","Guz Khan","Sally Phillips"],["Bridget Christie","Deborah Frances-White","Sara Pascoe"],["Rosie Jones","Ahir Shah","Henning Wehn"],null,null],"Winner(s)":["Bill Bailey","Danny Baker",["Rich Hall","Jeremy Hardy"],"Clive Anderson","Jo Brand","Gyles Brandreth","Danny Baker","Jackie Clune","Clive Anderson","Dave Gorman","Alan Davies","Richard E. Grant","John Sessions","Sean Lock","Rich Hall","Phill Jupitus","Jeremy Clarkson","Jimmy Carr","Anneka Rice","Dara Ó Briain","Rich Hall",["Rich Hall","Josie Lawrence"],"Clive Anderson","Linda Smith","Rich Hall","Rich Hall","Andy Hamilton","Rory McGrath","Alexander Armstrong","Sean Lock","Bill Bailey","Jeremy Clarkson","David Mitchell","Helen Atkinson-Wood","Mark Steel","Clive Anderson","Bill Bailey","Jo Brand","Vic Reeves","Neil Mullarkey","Ronni Ancona","The Audience","Alan Davies","Dara Ó Briain","Jonathan Ross","Alan Davies","Graeme Garden",["Roger McGough","Vic Reeves"],"Jessica Stevenson","Dara Ó Briain","Rob Brydon","Jo Brand","Alan Davies","Rich Hall","Phill Jupitus","Vic Reeves",["Clive Anderson","Vic Reeves"],"Alan Davies","Jeremy Clarkson","The Audience",["Jimmy Carr","Dara Ó Briain"],"Alan Davies",null,"Ronni Ancona","Clive Anderson","Charlie Higson","Pam Ayres","Hugh Dennis","Sean Lock","Phill Jupitus","Rich Hall","Ben Miller","The Audience","Alan Davies","David Mitchell",["David Mitchell","Dara Ó Briain"],"John Hodgman","Liza Tarbuck","Alan Davies","Alan Davies","Alan Davies","The Girls","Jo Brand","Hugh Dennis","David Mitchell","Jan Ravens",["Alan Davies","Rich Hall"],["Alan Davies","Jack Dee"],"Clive Anderson (QI) / The Audience (QI XL)","Bill Bailey","Alan Davies",null,null,"Jack Dee",["Gyles Brandreth","Sue Perkins"],"Sean Lock","Jo Brand","Ross Noble","Phill Jupitus","Dara Ó Briain","Sandi Toksvig","Bill Bailey","David Mitchell","Fred MacAulay","Clare Balding","Rob Brydon","Daniel Radcliffe","Phill Jupitus","Rob Brydon",null,null,"David Walliams","Sandi Toksvig","Bill Bailey",["John Bishop","Frank Skinner"],"Phill Jupitus","Johnny Vegas","Nina Conti","Prof. Brian Cox","Not stated","Andy Hamilton","Sandi Toksvig","Dave Gorman","Rich Hall","ASIMO",null,null,"Alan Davies","David Mitchell","Alan Davies","Everyone","Victoria Coren","Alan Davies","Alan Davies","David Mitchell","Susan Calman","Cal Wilson","Ross Noble","Stephen Fry","Sue Perkins","Reginald D. Hunter","Bill Bailey","Alan Davies","The Rev. Richard Coles","Danny Baker",null,null,"Alan Davies","Sandi Toksvig","Sara Pascoe","Ross Noble","Alan Davies","David Mitchell","The Audience","Sandi Toksvig","Alan Davies","Bill Bailey","Danny Baker","Bill Bailey","Sandi Toksvig",["The Rev. Richard Coles","Victoria Coren Mitchell"],"Alan Davies","Phill Jupitus","Jimmy Carr","Sandi Toksvig",null,null,"Ross Noble","Jason Manford","Victoria Coren Mitchell","Alan Davies","Phill Jupitus","Alan Davies","Sandi Toksvig","Tony Hawks","Ross Noble","Adam Hills","Alan Davies","Jimmy Carr","Danny Baker","Lucy Porter","Claudia O'Doherty","Colin Lane",null,null,"Lucy Porter","Sheila Hancock","David Mitchell","Cariad Lloyd","Aisling Bea","Jo Brand","Danny Bhoy","Alan Davies","Tommy Tiernan","Phill Jupitus","Bill Bailey",["Matt Lucas","Julia Zemiro"],"Phill Jupitus","Alan Davies","Jo Brand","Chris Addison",null,null,"Alan Davies","Alan Davies","Alan Davies","Jason Manford","Gyles Brandreth","Holly Walsh","Richard Osman","Miles Jupp","All","Ross Noble",["Phill Jupitus","Nish Kumar"],"Cariad Lloyd","Ronni Ancona","Sarah Millican","Ross Noble","Jimmy Carr",null,null,"Claudia Winkleman","Cariad Lloyd","Joe Lycett","Jan Ravens","Nish Kumar","Matt Lucas","Colin Lane","Katherine Ryan","All","Susan Calman","Cariad Lloyd","Aisling Bea","Josh Widdicombe","Victoria Coren Mitchell","David Mitchell","Colin Lane",null,null,"Danny Baker","Aisling Bea","All","Sara Pascoe","Victoria Coren Mitchell","Hannah Gadsby","Romesh Ranganathan","Stephen K. Amos","Noel Fielding","Jimmy Carr","Phill Jupitus","Holly Walsh","Alan Davies","Ed Byrne",["Alan Davies","Ellie Taylor"],"Matt Lucas",null,null,"Loyiso Gola","Holly Walsh","Anuvab Pal","Stephen K. Amos","Holly Walsh","Phill Jupitus","Marvin the Paranoid Android","Daliso Chaponda","Alan Davies","Jimmy Carr","Phill Jupitus","Sally Phillips","Alan Davies","Sarah Millican","The Audience","David Mitchell",null,null,"John Barrowman","Zoe Lyons","Holly Walsh","Alan Davies","Holly Walsh","Holly Walsh","Gyles Brandreth","Zoe Lyons","Josh Widdicombe","Susan Calman","Benjamin Zephaniah","Everyone (it's Christmas)","Dr. Maggie Aderin-Pocock","Jack Carroll","Alan Davies","Alan Davies",null,null,"Lee Mack","Alan Davies","Eshaan Akbar","Rosie Jones","Rose Matafeo","Alan Davies","Richard Osman","Sally Phillips","Josh Widdicombe","Chris McCausland","Johnny Vegas","Holly Walsh","Guy Smart","Sara Pascoe",null,null,"Everyone","Holly Walsh","Hannah Waddingham","Richard Osman","Mark Steel","Maisie Adam","Ria Lina","Gyles Brandreth","The Audience","Alan Davies","Rob Beckett","Cariad Lloyd","The Audience","Deborah Frances-White","Alan Davies",null,null],"Air Date":[null,"2003-09-11","2003-09-18","2003-09-25","2003-10-02","2003-10-09","2003-10-16","2003-10-23","2003-10-30","2003-11-06","2003-11-13","2003-11-20","2003-12-23","2004-10-08","2004-10-08","2004-10-15","2004-10-22","2004-10-29","2004-11-05","2004-11-12","2004-11-19","2004-11-26","2004-12-03","2004-12-10","2004-12-17","2005-09-30","2005-09-30","2005-10-07","2005-10-14","2005-10-21","2005-10-28","2005-11-04","2005-11-11","2005-11-18","2005-11-25","2005-12-02","2005-12-09","2006-09-29","2006-09-29","2006-10-06","2006-10-13","2006-10-20","2006-10-27","2006-11-03","2006-11-10","2006-11-17","2006-11-24","2006-12-01","2006-12-08","2006-12-15","2007-09-21","2007-09-21","2007-09-28","2007-10-05","2007-10-12","2007-10-19","2007-10-26","2007-11-02","2007-11-09","2007-11-16","2007-11-23","2007-12-07","2007-12-14","2008-11-14","2008-12-22","2009-01-09","2009-01-16","2009-01-23","2009-01-30","2009-02-06","2009-02-13","2009-02-20","2009-02-27","2009-03-06","2009-03-20","2009-11-26","2009-12-03","2009-12-10","2009-12-17","2009-12-24","2010-01-01","2010-01-08","2010-01-15","2010-01-22","2010-01-29","2010-02-05","2010-02-12","2010-02-19","2010-03-05","2010-03-26","2010-04-02","2010-04-05","2010-04-16","2010-09-17","2010-09-24","2010-10-01","2010-10-08","2010-10-15","2010-10-22","2010-10-29","2010-11-05","2010-11-12","2010-11-26","2010-12-03","2010-12-10","2010-12-17","2010-12-24","2011-01-07","2011-01-14","2011-04-25","2011-05-02","2011-03-06","2011-09-09","2011-09-16","2011-09-23","2011-09-30","2011-10-07","2011-10-14","2011-10-21","2011-10-28","2011-11-04","2011-11-11","2011-12-29","2011-11-25","2011-12-02","2011-12-16","2011-12-23","2011-12-29","2012-04-27","2012-05-04","2012-03-23","2012-09-14","2012-09-21","2012-09-28","2012-10-05","2012-10-12","2012-10-19","2012-10-26","2012-11-02","2012-11-09","2012-11-23","2012-11-30","2012-12-07","2012-12-14","2012-12-21","2012-12-28","2013-01-04","2013-01-11","2013-08-25","2013-09-06","2013-09-13","2013-09-20","2013-09-27","2013-10-04","2013-10-11","2013-10-18","2013-10-25","2013-11-01","2013-11-08","2013-11-29","2013-12-06","2013-12-13","2013-12-24","2014-01-10","2014-01-17","2014-01-24","2014-01-31","2014-10-03","2014-10-10","2014-10-17","2014-10-24","2014-10-31","2014-11-07","2014-11-21","2014-11-28","2014-12-05","2014-12-12","2014-12-19","2014-12-25","2015-01-02","2015-01-09","2015-01-16","2015-01-23","2015-01-30","2015-01-31","2015-10-16","2015-10-23","2015-10-30","2015-11-06","2015-11-20","2015-11-27","2015-12-11","2015-12-19","2015-12-29","2016-01-08","2016-01-15","2016-01-22","2016-01-29","2016-02-05","2016-02-12","2016-02-19","2016-03-04","2016-03-25","2016-10-21","2016-10-28","2016-11-04","2016-11-11","2016-11-25","2016-12-02","2016-12-09","2016-12-16","2016-12-22","2016-12-30","2017-01-06","2017-01-13","2017-01-20","2017-01-27","2017-02-03","2017-02-10","2017-02-17","2017-02-24","2017-10-20","2017-10-27","2017-11-03","2017-11-10","2017-11-24","2017-12-01","2017-12-08","2017-12-15","2017-12-26","2018-01-05","2018-01-12","2018-01-19","2018-01-26","2018-02-02","2018-02-09","2018-02-16","2018-02-23","2018-03-02","2018-09-10","2018-09-17","2018-09-24","2018-10-01","2018-10-08","2018-10-15","2018-10-22","2018-10-29","2018-12-18","2019-01-11","2019-01-18","2019-01-25","2019-02-01","2019-02-08","2019-02-15","2019-02-22","2019-03-01","2019-03-08","2019-09-06","2019-09-13","2019-09-20","2019-09-27","2019-10-04","2019-10-11","2019-10-18","2019-10-25","2019-12-24","2020-01-03","2020-01-10","2020-01-17","2020-01-24","2020-01-31","2020-02-07","2020-02-14","2020-02-21","2020-02-28","2020-05-28","2020-06-04","2020-06-11","2020-06-18","2020-06-25","2020-07-02","2020-07-09","2020-07-16","2020-07-23","2020-07-30","2020-08-06","2020-12-23","2021-01-07","2021-01-14","2021-01-21","2021-01-28","2020-08-13","2021-02-04","2021-09-09","2021-09-16","2021-09-23","2021-09-30","2021-10-07","2021-10-14","2021-10-21","2021-12-20","2022-01-07","2022-01-14","2022-01-21","2022-01-28","2022-02-04","2022-02-11","2022-02-15","2022-02-22","2022-03-18","2022-11-11","2022-11-18","2022-11-25","2022-12-02","2022-12-09","2022-12-16","2022-12-19","2023-01-06","2023-01-13","2023-01-20","2023-01-27","2023-02-03","2023-02-10","2023-02-17","2023-02-24","2023-03-03"]},"columns":[{"id":"Series","name":"Series","type":"factor"},{"id":"# Overall","name":"# Overall","type":"numeric"},{"id":"# in Series","name":"# in Series","type":"numeric"},{"id":"Title","name":"Title","type":"character"},{"id":"Guests","name":"Guests","type":"list"},{"id":"Winner(s)","name":"Winner(s)","type":"list"},{"id":"Air Date","name":"Air Date","type":"Date"}],"groupBy":["Series"],"pagination":false,"dataKey":"a453d4d9b3eb3b6ccbc20e070701e04e"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script><figcaption class="figure-caption">Figure&nbsp;2: The clean QI guests dataset</figcaption></figure>
</div>
</div>
</section><section id="analysis" class="level1 page-columns page-full"><h1>Analysis</h1>
<p>Now we have some clean data, lets get the top 24 guests who have ever appeared on QI. If you’re familiar with UK comedy, you’ll see some more recently popular comedians on there (e.g., Cariad LLoyd), some older names (e.g., John Sessions), and some that have been around forever (e.g., Phil Jupitus).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>unnested_guests <span class="ot">&lt;-</span> <span class="fu">unnest</span>(clean, guests)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>top_guests <span class="ot">&lt;-</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  unnested_guests <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(guests, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">24</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="fu">str_glue</span>(<span class="st">"{top_guests$guests} ({top_guests$n})"</span>))</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Bill Bailey (47)"     "Phill Jupitus (46)"   "Jimmy Carr (42)"     
 [4] "Jo Brand (42)"        "David Mitchell (32)"  "Sean Lock (27)"      
 [7] "Rich Hall (25)"       "Ross Noble (19)"      "Jason Manford (17)"  
[10] "Josh Widdicombe (17)" "Sandi Toksvig (17)"   "Aisling Bea (16)"    
[13] "Clive Anderson (16)"  "Sue Perkins (16)"     "Holly Walsh (15)"    
[16] "Rob Brydon (15)"      "Dara Ó Briain (14)"   "Jeremy Clarkson (14)"
[19] "Johnny Vegas (14)"    "Sara Pascoe (14)"     "Cariad Lloyd (13)"   
[22] "Sarah Millican (12)"  "Susan Calman (11)"    "John Sessions (10)"  </code></pre>
</div>
</div>
<p>So, time for the main event! <a href="#fig-qihist">Figure&nbsp;3</a> shows the distributions of the appearances of the top 24 QI guests. Some interesting things to note:</p>
<ul>
<li><p>There is a clear “old guard” - the likes of John Sessions, Rich Hall, Clive Anderson, Sean Lock, Dara O’Briain, and Rob Brydon. This is not to say that all of these comedians fell out of popularity, however - Rob, Dara and Sean (up until his passing) especially remain popular TV comics.</p></li>
<li><p>Equally, there is a “new guard” of comics who became popular more recently, including Josh Widdicombe, Cariad Lloyd, Sara Pascoe, and Aisling Bea.</p></li>
<li><p>There is a third category, one could call an “evergreen” guest, that has been around for the long haul. This category includes guests like Phil Jupitus, Bill Bailey, David Mitchell and Jimmy Carr.</p></li>
</ul>
<p>Some interesting individuals include:</p>
<ul>
<li><p>Jo Brand, who was on very often originally, but whose appearances have descreased over time.</p></li>
<li><p>Jeremy Clarkson, who isn’t really a comedian but exists is comedian-adjacent in being quick/entertaining enough to</p></li>
</ul>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-qihist</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histograms showing the distribution of appearances of the top 24 most common QI guest comedians."</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: body-outset-right</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>hist_data <span class="ot">&lt;-</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  unnested_guests <span class="sc">%&gt;%</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(guests <span class="sc">%in%</span> top_guests<span class="sc">$</span>guests,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>         series <span class="sc">%in%</span> LETTERS) <span class="sc">%&gt;%</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">guests =</span> forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(guests, original_air_date, <span class="at">.na_rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">guest =</span> guests, series)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>hist_data <span class="sc">%&gt;%</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> series, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> series), <span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(guest), <span class="at">nrow =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"grey85"</span>),</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">aspect.ratio =</span> <span class="dv">1</span><span class="sc">/</span><span class="fl">1.6</span>,</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linewidth =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"viridis"</span>) <span class="sc">+</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">expansion</span>()) <span class="sc">+</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">n.dodge =</span> <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Series"</span>, <span class="at">y =</span> <span class="cn">NULL</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-body-outset-right">
<div id="fig-qihist" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="index_files/figure-html/fig-qihist-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Histograms showing the distribution of appearances of the top 24 most common QI guest comedians.</figcaption></figure>
</div>
</div>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>