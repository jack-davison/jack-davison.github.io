<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Teaching Myself to Web Scrape (TidyTuesday 2021 Week 12: Steam Users)</title>

  <meta property="description" itemprop="description" content="Augmenting a lacking TidyTuesday data set with data from the web."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-03-16"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-03-16"/>
  <meta name="article:author" content="Jack Davison"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Teaching Myself to Web Scrape (TidyTuesday 2021 Week 12: Steam Users)"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Augmenting a lacking TidyTuesday data set with data from the web."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Teaching Myself to Web Scrape (TidyTuesday 2021 Week 12: Steam Users)"/>
  <meta property="twitter:description" content="Augmenting a lacking TidyTuesday data set with data from the web."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","categories","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Teaching Myself to Web Scrape (TidyTuesday 2021 Week 12: Steam Users)"]},{"type":"character","attributes":{},"value":["Augmenting a lacking TidyTuesday data set with data from the web.\n"]},{"type":"character","attributes":{},"value":["tidytuesday"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Jack Davison"]}]}]},{"type":"character","attributes":{},"value":["03-16-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","code_folding","toc","toc_depth","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["tidytuesday-2021-week-12-steam-users_files/anchor-4.2.2/anchor.min.js","tidytuesday-2021-week-12-steam-users_files/bowser-1.9.3/bowser.min.js","tidytuesday-2021-week-12-steam-users_files/distill-2.2.21/template.v2.js","tidytuesday-2021-week-12-steam-users_files/figure-html5/unnamed-chunk-10-1.png","tidytuesday-2021-week-12-steam-users_files/figure-html5/unnamed-chunk-3-1.png","tidytuesday-2021-week-12-steam-users_files/figure-html5/unnamed-chunk-9-1.png","tidytuesday-2021-week-12-steam-users_files/header-attrs-2.7/header-attrs.js","tidytuesday-2021-week-12-steam-users_files/jquery-1.11.3/jquery.min.js","tidytuesday-2021-week-12-steam-users_files/popper-2.6.0/popper.min.js","tidytuesday-2021-week-12-steam-users_files/tippy-6.2.7/tippy-bundle.umd.min.js","tidytuesday-2021-week-12-steam-users_files/tippy-6.2.7/tippy-light-border.css","tidytuesday-2021-week-12-steam-users_files/tippy-6.2.7/tippy.css","tidytuesday-2021-week-12-steam-users_files/tippy-6.2.7/tippy.umd.min.js","tidytuesday-2021-week-12-steam-users_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="tidytuesday-2021-week-12-steam-users_files/header-attrs-2.7/header-attrs.js"></script>
  <script src="tidytuesday-2021-week-12-steam-users_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="tidytuesday-2021-week-12-steam-users_files/popper-2.6.0/popper.min.js"></script>
  <link href="tidytuesday-2021-week-12-steam-users_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="tidytuesday-2021-week-12-steam-users_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="tidytuesday-2021-week-12-steam-users_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="tidytuesday-2021-week-12-steam-users_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="tidytuesday-2021-week-12-steam-users_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="tidytuesday-2021-week-12-steam-users_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="tidytuesday-2021-week-12-steam-users_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Teaching Myself to Web Scrape (TidyTuesday 2021 Week 12: Steam Users)","description":"Augmenting a lacking TidyTuesday data set with data from the web.","authors":[{"author":"Jack Davison","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-03-16T00:00:00.000+00:00","citationText":"Davison, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Teaching Myself to Web Scrape (TidyTuesday 2021 Week 12: Steam Users)</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt=tag">tidytuesday</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>Augmenting a lacking TidyTuesday data set with data from the web.</p></p>
</div>

<div class="d-byline">
  Jack Davison  
  
<br/>03-16-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#our-data">Our Data</a></li>
<li><a href="#initial-analysis">Initial Analysis</a></li>
</ul></li>
<li><a href="#web-scraping">Web Scraping</a>
<ul>
<li><a href="#the-gentlest-introduction-to-scraping-html-tables">The gentlest introduction to scraping HTML tables</a></li>
<li><a href="#the-main-event">The main event</a></li>
<li><a href="#further-analysis">Further Analysis</a></li>
</ul></li>
<li><a href="#concluding-remarks">Concluding Remarks</a></li>
</ul>
</nav>
</div>
<h1 id="introduction">Introduction</h1>
<h2 id="our-data">Our Data</h2>
<p>This week’s #TidyTuesday data set is quite a simple one. Let’s give it a look:</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>games</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Rows: 83,631
Columns: 7
$ gamename      &lt;chr&gt; &quot;Counter-Strike: Global Offensive&quot;, &quot;Dota 2&quot;, ~
$ year          &lt;dbl&gt; 2021, 2021, 2021, 2021, 2021, 2021, 2021, 2021~
$ month         &lt;chr&gt; &quot;February&quot;, &quot;February&quot;, &quot;February&quot;, &quot;February&quot;~
$ avg           &lt;dbl&gt; 741013.24, 404832.13, 198957.52, 120982.64, 11~
$ gain          &lt;dbl&gt; -2196.42, -27839.52, -2289.67, 49215.90, -2437~
$ peak          &lt;dbl&gt; 1123485, 651615, 447390, 196799, 224276, 13362~
$ avg_peak_perc &lt;chr&gt; &quot;65.9567%&quot;, &quot;62.1275%&quot;, &quot;44.4707%&quot;, &quot;61.4752%&quot;~</code></pre>
</div>
<p>We can see that there is effectively 4 pieces of information in this data set - the name of the video game, the date (a combination of <em>year</em> and <em>month</em>), and the monthly average and peak number of players. The other two columns could be recalculated from the other columns, but are nice to have.</p>
<p>There is other data that I’d maybe have wanted in an ideal world - the game publisher/designer may be one, game review ratings at every month, the game genre, etc. But we aren’t always in an ideal world and this is what we have got!</p>
<p>Let’s first do some initial cleaning. There are two issues with this data set:</p>
<ul>
<li><em>avg_peak_perc</em> is a character owing to the percentage sign - we’ll parse the number from this. I’m not actually going to use this column, but its nice to do so everything is in order.</li>
<li><em>year</em> and <em>month</em> can be combined into one column, which we’ll make sure is a date. The <em>lubridate</em> package has the <code>my()</code> function which we’ll use alongside <code>glue::glue()</code>.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>games</span> <span class='op'>=</span> <span class='va'>games</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>avg_peak_perc <span class='op'>=</span> <span class='fu'>parse_number</span><span class='op'>(</span><span class='va'>avg_peak_perc</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>100</span>,
         yearmon <span class='op'>=</span> <span class='fu'>lubridate</span><span class='fu'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/ymd.html'>my</a></span><span class='op'>(</span><span class='fu'>glue</span><span class='fu'>::</span><span class='fu'><a href='https://glue.tidyverse.org/reference/glue.html'>glue</a></span><span class='op'>(</span><span class='st'>"{month}/{year}"</span><span class='op'>)</span><span class='op'>)</span>,
         .keep <span class='op'>=</span> <span class='st'>"unused"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>relocate</span><span class='op'>(</span><span class='va'>yearmon</span>, .after <span class='op'>=</span> <span class='va'>gamename</span><span class='op'>)</span>

<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>games</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Rows: 83,631
Columns: 6
$ gamename      &lt;chr&gt; &quot;Counter-Strike: Global Offensive&quot;, &quot;Dota 2&quot;, ~
$ yearmon       &lt;date&gt; 2021-02-01, 2021-02-01, 2021-02-01, 2021-02-0~
$ avg           &lt;dbl&gt; 741013.24, 404832.13, 198957.52, 120982.64, 11~
$ gain          &lt;dbl&gt; -2196.42, -27839.52, -2289.67, 49215.90, -2437~
$ peak          &lt;dbl&gt; 1123485, 651615, 447390, 196799, 224276, 13362~
$ avg_peak_perc &lt;dbl&gt; 0.659567, 0.621275, 0.444707, 0.614752, 0.5249~</code></pre>
</div>
<h2 id="initial-analysis">Initial Analysis</h2>
<p>Now there are two ways we could go with this - we could look at lots of different games and compare between them, or we could have a deeper look at a single game. There are 1258 games in this data set, but whenever I plot the timeseries I am desperate to aggregate them in some way, and without genre or publisher or the like I keep getting stuck.</p>
<p>Instead, let’s look at a single game - Dota 2. It is updated regularly and I’m familiar-ish with it. I stopped playing after I started university because the games were too long and the community too toxic, but I have a relatively good grasp of what Dota 2 is all about. Let’s plot up the data.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/ggthemr/man/ggthemr.html'>ggthemr</a></span><span class='op'>(</span>palette <span class='op'>=</span> <span class='st'>"chalk"</span>, text_size <span class='op'>=</span> <span class='fl'>11</span>, layout <span class='op'>=</span> <span class='st'>"minimal"</span>, type <span class='op'>=</span> <span class='st'>"outer"</span><span class='op'>)</span>

<span class='va'>games</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>gamename</span> <span class='op'>==</span> <span class='st'>"Dota 2"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>yearmon</span>, y <span class='op'>=</span> <span class='va'>avg</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='va'><a href='https://scales.r-lib.org//reference/label_number.html'>comma</a></span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>y <span class='op'>=</span> <span class='st'>"Monthly Concurrent Dota 2 Players"</span>, x <span class='op'>=</span> <span class='st'>"Date"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="tidytuesday-2021-week-12-steam-users_files/figure-html5/unnamed-chunk-3-1.png" width="624" /></p>
</div>
<p>So the average player count seems to peak in 2016 and has been gently decreasing since, with a little burst of activity in 2019-ish. The immediate question I have is - what is prompting the increases and decreases in player count? Updates are a natural possibility, but we don’t have data on that to hand… or do we?</p>
<h1 id="web-scraping">Web Scraping</h1>
<h2 id="the-gentlest-introduction-to-scraping-html-tables">The gentlest introduction to scraping HTML tables</h2>
<p>The Dota 2 Gamepedia (wiki) has a wonderful table of all of the major versions of the game. You can see it <a href="https://dota2.gamepedia.com/Game_Versions">here</a>. Our problem, however, is that it is a HTML table and not inside of R - yet!</p>
<p>Web scraping is something that I’ve always assumed would be extremely difficult, but it turns out that it couldn’t be simpler with the <em>rvest</em> package. I’ll demonstrate how I pulled that table from the internet and to my R session without having to manually copy it out at all.</p>
<p>First, I’m going to use <code>read_html()</code>, which is imported from the <em>xml2</em> package. We can see the output of this below.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rvest.tidyverse.org/'>rvest</a></span><span class='op'>)</span>

<span class='fu'><a href='http://xml2.r-lib.org/reference/read_xml.html'>read_html</a></span><span class='op'>(</span><span class='st'>"https://dota2.gamepedia.com/Game_Versions"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>{html_document}
&lt;html class=&quot;client-nojs&quot; lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; cha ...
[2] &lt;body class=&quot;mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 n ...</code></pre>
</div>
<p>Now if I’m entirely honest, my ability to read HTML is not the best - I can get by with basic stuff, but actual websites have so much going on it can get pretty complicated. But we don’t actually have to manually scan through this output, we can pull specific pieces out of it using <code>rvest::html_nodes()</code> provided with the argument “table”.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rvest.tidyverse.org/reference/rename.html'>html_nodes</a></span><span class='op'>(</span><span class='fu'><a href='http://xml2.r-lib.org/reference/read_xml.html'>read_html</a></span><span class='op'>(</span><span class='st'>"https://dota2.gamepedia.com/Game_Versions"</span><span class='op'>)</span>, <span class='st'>"table"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>{xml_nodeset (5)}
[1] &lt;table class=&quot;wikitable&quot; style=&quot;text-align:center&quot; width=&quot;75%&quot;&gt; ...
[2] &lt;table&gt;&lt;tbody&gt;&lt;tr style=&quot;vertical-align:top;&quot;&gt;\n&lt;td width=&quot;120p ...
[3] &lt;table&gt;&lt;tbody&gt;&lt;tr style=&quot;vertical-align:top;&quot;&gt;\n&lt;td width=&quot;120p ...
[4] &lt;table class=&quot;notanavbox&quot; cellspacing=&quot;0&quot; style=&quot;;&quot;&gt;&lt;tbody&gt;&lt;tr&gt; ...
[5] &lt;table cellspacing=&quot;0&quot; class=&quot;nowraplinks hlist mw-collapsible&quot; ...</code></pre>
</div>
<p>So we’re still at the stage where we’ve got a load of unformatted HTML, but at least we now have a list of tables on this web page. I can only visibly see two things that are recognisable as tables myself, so there’ll be some underlying HTML that is using a table structure for something that’s not <em>really</em> a table.</p>
<p>Anyway, our next step is to use another <em>rvest</em> function, <code>html_table()</code>, to format our table into a usable tibble in R. My plan was to use the robust scientific process of trying each one in turn until I find the correct one, and I was delighted to find it was the first identified table in this list of five.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rvest.tidyverse.org/reference/html_table.html'>html_table</a></span><span class='op'>(</span><span class='fu'><a href='https://rvest.tidyverse.org/reference/rename.html'>html_nodes</a></span><span class='op'>(</span><span class='fu'><a href='http://xml2.r-lib.org/reference/read_xml.html'>read_html</a></span><span class='op'>(</span><span class='st'>"https://dota2.gamepedia.com/Game_Versions"</span><span class='op'>)</span>, <span class='st'>"table"</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>glimpse</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>List of 1
 $ : tibble [75 x 3] (S3: tbl_df/tbl/data.frame)
  ..$ Version   : chr [1:75] &quot;7.28c&quot; &quot;7.28b&quot; &quot;7.28a&quot; &quot;7.28&quot; ...
  ..$ Highlights: chr [1:75] &quot;Nerfed&quot; &quot;Nerfed      \nBuffed                              \nRebalanced&quot; &quot;Nerfed                \nBuffed&quot; &quot;Added new heroes: HoodwinkNerfed              \nBuffed                                                   \nReba&quot;| __truncated__ ...
  ..$ Patch Date: chr [1:75] &quot;2021-02-19&quot; &quot;2021-01-10&quot; &quot;2020-12-22&quot; &quot;2020-12-17&quot; ...</code></pre>
</div>
<p>My heart swells with pride - we’ve just pulled a HTML table from the internet and got it into R. This isn’t quite the end of the story - there is a second table for updates before version 7.0.0, and we’ll need to do some data tidying/cleaning - but this new challenge is behind me.</p>
<h2 id="the-main-event">The main event</h2>
<p>Let’s do it “properly” now, in a “proper” workflow.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>recent_updates</span> <span class='op'>=</span> <span class='fu'><a href='https://rvest.tidyverse.org/reference/rename.html'>html_nodes</a></span><span class='op'>(</span><span class='fu'><a href='http://xml2.r-lib.org/reference/read_xml.html'>read_html</a></span><span class='op'>(</span><span class='st'>"https://dota2.gamepedia.com/Game_Versions"</span><span class='op'>)</span>,
                            <span class='st'>"table"</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rvest.tidyverse.org/reference/html_table.html'>html_table</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='va'>.</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>older_updates</span> <span class='op'>=</span> <span class='fu'><a href='https://rvest.tidyverse.org/reference/rename.html'>html_nodes</a></span><span class='op'>(</span><span class='fu'><a href='http://xml2.r-lib.org/reference/read_xml.html'>read_html</a></span><span class='op'>(</span><span class='st'>"https://dota2.gamepedia.com/Game_Versions/6.70_to_6.88f"</span><span class='op'>)</span>,
           <span class='st'>"table"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rvest.tidyverse.org/reference/html_table.html'>html_table</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='va'>.</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='va'>.</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span>,<span class='op'>]</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>patch_date_2</span><span class='op'>)</span>
  
<span class='va'>updates</span> <span class='op'>=</span> <span class='fu'>bind_rows</span><span class='op'>(</span><span class='va'>recent_updates</span>, <span class='va'>older_updates</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>patch_date <span class='op'>=</span> <span class='fu'>lubridate</span><span class='fu'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/ymd.html'>ymd</a></span><span class='op'>(</span><span class='va'>patch_date</span><span class='op'>)</span>,
         yearmon <span class='op'>=</span> <span class='fu'>lubridate</span><span class='fu'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/round_date.html'>floor_date</a></span><span class='op'>(</span><span class='va'>patch_date</span>, unit <span class='op'>=</span> <span class='st'>"month"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>version_updates</span> <span class='op'>=</span> <span class='va'>updates</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>version <span class='op'>=</span> <span class='fu'>parse_number</span><span class='op'>(</span><span class='va'>version</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>with_groups</span><span class='op'>(</span><span class='va'>version</span>, 
              <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>patch_date</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>patch_date</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>distinct</span><span class='op'>(</span><span class='va'>version</span>, <span class='va'>yearmon</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>I’ll explain what is going on here:</p>
<ul>
<li><p>I use the workflow above to read in both tables.</p></li>
<li><p>I use <code>janitor::clean_names()</code> to make the column headers easier to use (the function puts them all in <code>snake_case</code>).</p></li>
<li><p>In the case of the pre-v7.0.0 updates, Dota 1 and 2 were being updated concurrently, so there’s a second row of headers specifying which game is being talked about. In practice this means that the first line of the table generated by <code>html_table()</code> isn’t really meaningful and can be dropped, and as we’re considering Dota 2 only I can bin the second <em>patch_date</em> column as that refers to Dota 1.</p></li>
<li><p>I merge both of these tibbles together using <code>dplyr::bind_rows()</code>, and use the <em>lubridate</em> package once more to ensure that the <em>patch_date</em> column is a datetime and ensure that there is a <em>yearmon</em> column to merge with our existing data.</p></li>
<li><p>There are 143 updates in our data set. I reduce this to 36 by only considering “full” updates (e.g. v7.0.5) where typically heroes and items are added or reworked, rather than the alphabetically labelled updates (e.g. v7.0.5a) which are typically limited to balance fixes. I use the experimental <code>dplyr::with_groups()</code> function to achieve this.</p></li>
</ul>
<p>We did a lot there! It’s thankfully now easy to merge this with our original Dota 2 data. I’m going to add a new logical column called <em>popular</em>, which is effectively whether the update led to an increase or decrease in player counts.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dota2</span> <span class='op'>=</span> <span class='va'>games</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>gamename</span> <span class='op'>==</span> <span class='st'>"Dota 2"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>version_updates</span>, by <span class='op'>=</span> <span class='st'>"yearmon"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>yearmon</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>popular <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>version</span><span class='op'>)</span>, <span class='fu'>lead</span><span class='op'>(</span><span class='va'>gain</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>0</span>, <span class='cn'>NA</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>dota2</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Rows: 112
Columns: 8
$ gamename      &lt;chr&gt; &quot;Dota 2&quot;, &quot;Dota 2&quot;, &quot;Dota 2&quot;, &quot;Dota 2&quot;, &quot;Dota ~
$ yearmon       &lt;date&gt; 2012-07-01, 2012-08-01, 2012-09-01, 2012-10-0~
$ avg           &lt;dbl&gt; 52721.05, 55768.61, 61867.68, 75965.44, 101077~
$ gain          &lt;dbl&gt; NA, 3047.56, 6099.07, 14097.77, 25111.99, 2084~
$ peak          &lt;dbl&gt; 75041, 108689, 118724, 171860, 169631, 213521,~
$ avg_peak_perc &lt;dbl&gt; 0.702563, 0.513103, 0.521105, 0.442019, 0.5958~
$ version       &lt;dbl&gt; NA, NA, NA, 6.76, NA, NA, NA, NA, NA, NA, NA, ~
$ popular       &lt;lgl&gt; NA, NA, NA, TRUE, NA, NA, NA, NA, NA, NA, NA, ~</code></pre>
</div>
<h2 id="further-analysis">Further Analysis</h2>
<p>I’m going to start by recreating our earlier plot, but this time I’m going to encode our version updates data. I’ll also pretty it up a little!</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dota2</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>yearmon</span>, y <span class='op'>=</span> <span class='va'>avg</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>shape <span class='op'>=</span> <span class='va'>popular</span><span class='op'>)</span>, fill <span class='op'>=</span> <span class='st'>"#3c3c3c"</span>, color <span class='op'>=</span> <span class='st'>"#3c3c3c"</span>, size <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>popular</span>, fill <span class='op'>=</span> <span class='va'>popular</span>, shape <span class='op'>=</span> <span class='va'>popular</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#DB5461"</span>, <span class='st'>"#2AF5FF"</span><span class='op'>)</span>, na.value <span class='op'>=</span> <span class='st'>"#D8D5DB"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_fill_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#DB5461"</span>, <span class='st'>"#2AF5FF"</span><span class='op'>)</span>, na.value <span class='op'>=</span> <span class='st'>"#D8D5DB"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_shape_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>25</span>, <span class='fl'>24</span><span class='op'>)</span>, na.value <span class='op'>=</span> <span class='fl'>21</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='va'><a href='https://scales.r-lib.org//reference/label_number.html'>comma</a></span>, expand <span class='op'>=</span> <span class='fu'>expansion</span><span class='op'>(</span>mult <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>.1</span><span class='op'>)</span><span class='op'>)</span>, sec.axis <span class='op'>=</span> <span class='fu'>sec_axis</span><span class='op'>(</span><span class='op'>~</span><span class='va'>.</span>, labels <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='va'><a href='https://scales.r-lib.org//reference/label_number.html'>comma</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>expand_limits</span><span class='op'>(</span>y <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>x <span class='op'>=</span> <span class='cn'>NULL</span>, y <span class='op'>=</span> <span class='cn'>NULL</span>, 
       title <span class='op'>=</span> <span class='st'>"Monthly Average Concurrent Dota 2 players"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"Months with updates are marked using triangles.\nA red downwards triangle indicates an unpopular update, where the player numbers decreased.\nA blue upwards triangle indicates a popular update, where the player numbers increased."</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>panel.grid.major.y <span class='op'>=</span> <span class='fu'>element_line</span><span class='op'>(</span>linetype <span class='op'>=</span> <span class='fl'>2</span>, color <span class='op'>=</span> <span class='st'>"grey40"</span><span class='op'>)</span>,
        axis.line.y <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
        legend.position <span class='op'>=</span> <span class='st'>"none"</span>, 
        plot.title.position <span class='op'>=</span> <span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="tidytuesday-2021-week-12-steam-users_files/figure-html5/unnamed-chunk-9-1.png" width="624" data-distill-preview=1 /></p>
</div>
<p>So there’s a fair scatter of popular and unpopular updates throughout the history of the game. Initially all of the updates were popular, but we can rationalise that as initial hype as the game grew and people migrated from Dota 1. After that there were a series of unpopular updates until 2017, where the popularity of updates started almost alternating.</p>
<p>Let’s make a more basic plot to illustrate this.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dota2</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>l_gain <span class='op'>=</span> <span class='fu'>lead</span><span class='op'>(</span><span class='va'>gain</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>drop_na</span><span class='op'>(</span><span class='va'>version</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>version</span>, y <span class='op'>=</span> <span class='va'>l_gain</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_segment</span><span class='op'>(</span>color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/ggthemr/man/swatch.html'>swatch</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>, <span class='fu'>aes</span><span class='op'>(</span>yend <span class='op'>=</span> <span class='fl'>0</span>, xend <span class='op'>=</span> <span class='va'>version</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>l_gain</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_hline</span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Version"</span>, y <span class='op'>=</span> <span class='st'>"Gain in average monthly players"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#DB5461"</span>, <span class='st'>"#2AF5FF"</span><span class='op'>)</span>, na.value <span class='op'>=</span> <span class='st'>"#D8D5DB"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="tidytuesday-2021-week-12-steam-users_files/figure-html5/unnamed-chunk-10-1.png" width="624" /></p>
</div>
<p>I’m now wondering which updates had the biggest effect on the player count? Let’s try pulling out the top, say, five.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>big_updates</span> <span class='op'>=</span> <span class='va'>dota2</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>l_gain <span class='op'>=</span> <span class='fu'>lead</span><span class='op'>(</span><span class='va'>gain</span><span class='op'>)</span>,
         a_gain <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>l_gain</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>drop_na</span><span class='op'>(</span><span class='va'>version</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>a_gain</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>5</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>l_gain</span>, <span class='va'>version</span><span class='op'>)</span>

<span class='va'>big_updates</span>
</code></pre>
</div>
</details>
<pre><code># A tibble: 5 x 2
   l_gain version
    &lt;dbl&gt;   &lt;dbl&gt;
1  89163.    7.21
2  56153.    7.25
3  54287.    6.84
4 -48014.    7.09
5  43985.    7.13</code></pre>
</div>
<p>The Dota 2 wiki unhelpfully has images rather than text in the table to describe the updates. If it did have text, now would be the time to <code>semi_join()</code> this onto our updates data and read what was included in these versions, but I’ll just have to read them myself instead.</p>
<ul>
<li><p>v7.21 is an interesting leader because nothing really stands out about it. I found a Reddit thread that suggests v7.20 reworked a load of the heroes and 7.21 rolled back some of the changes.</p></li>
<li><p>v7.25 has the usual array of hero updates, but also changed how All Pick (the “default” mode to pick heroes at the beginning of a match) worked.</p></li>
<li><p>v6.84 is more what I expected the top 2 to be - a load of reworks and additions to items and heroes. A seemingly pretty big update.</p></li>
<li><p>v7.09 confuses me most. Seemingly coinciding the biggest drop in players in this analysis, the only highlights were a buff to the animal courier that carries hero items and a rework to an early game item.</p></li>
<li><p>v7.13 again there is little to report.</p></li>
</ul>
<p>Hmm.</p>
<h1 id="concluding-remarks">Concluding Remarks</h1>
<p>The main thing I’ve taken from this activity is that web scraping isn’t necessarily as scary as I thought it was, at least for HTML that already exists as a table.</p>
<p>As far as the analysis goes, I did a bit of tidying, cleaning and joining and tried to identify which updates might have caused the biggest changes in player numbers. My initial hypothesis going in was that the most dramatic changes would happen alongside big updates where heroes are added or reworked, but that doesn’t seem to be the case.</p>
<p>I think there are key weaknesses in the way I conducted this very basic analysis:</p>
<ul>
<li><p>Unavoidably, player counts aren’t just related to updates. Interest in games wax and wane for lots of reasons, including attitudes to the company and what <em>isn’t</em> being updated as much as what is. It’s tricky to really include this in analysis without a lot of further reading.</p></li>
<li><p>To join the data easily without letting updates “bunch up” I rounded the update date <em>down</em> to the nearest month. There is an obvious weakness here in that an update that came on the 25th of January isn’t going to have an effect for the 1-24th. If I wanted to really get more insight out of this I’d have to carefully consider how far through each month each update was.</p></li>
<li><p>As the data is monthly, it is hard to really capture the effect of a game update. It is intuitive that player numbers may spike the day or even the week after a big update, and then either settle down if nothing that exciting changed or perhaps stay high/low depending on the opinion of the player-base. We don’t quite see that fine detail in monthly data.</p></li>
</ul>
<p>If I wanted to spend more time on this, I think it’d be interesting to do a bit more:</p>
<ul>
<li><p>Could you predict the “popularity” of an update (how big/small the gain is) based on features of the update (could just be verbs - “Added”, “Removed”, “Buffed”, “Nerfed”, “Reworked”, etc.) - what <em>kind</em> of update has the biggest effect?</p></li>
<li><p>Is there a better way to understand gain vs just month-to-month? Is there a way to smooth it a bit so you get more of the context of each update? e.g. it is possible that some of my “most/least popular” updates were just in the wake of the <em>actual</em> big updates and claimed the glory.</p></li>
<li><p>Dota 1 isn’t on Steam, so I doubt the data is out there, but I wonder if when the same or similar updates were being made to both whether they were received the same way by both communities. Someone would have to be quite canny with time series to remove the effect of players migrating from one to the other though.</p></li>
</ul>
<p>Regardless, we’ve done a bit of web scraping, and that’s the main thing.</p>
<p>Happy <a href="https://github.com/jack-davison/TidyTuesday">#TidyTuesday</a>!</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
